var Ripples=function(a,t){var r=a.getContext("2d"),n=a.width,o=a.height,d=n>>1,e=o>>1,f=n*(o+3)*2,i=n,g=n*(o+3),u=t||3,v=new Int32Array(f),c=new Int32Array(f),h=0,m=r.getImageData(0,0,n,o),I=r.getImageData(0,0,n,o);return{draw:function(){!function(){var a,t,r,f,u,p,w;a=i,i=g,g=a,a=0,h=i;for(var D=0;D<o;D++)for(var y=0;y<n;y++)f=v[h-n]+v[h+n]+v[h-1]+v[h+1]>>1,f-=v[g+a],f-=f>>4,v[g+a]=f,f=1024-f,u=c[a],c[a]=f,u!=f&&(r=((D-e)*f/1024<<0)+e,(t=((y-d)*f/1024<<0)+d)>=n&&(t=n-1),t<0&&(t=0),r>=o&&(r=o-1),r<0&&(r=0),w=4*(t+r*n),p=4*a,m.data[p]=I.data[w],m.data[p+1]=I.data[w+1],m.data[p+2]=I.data[w+2]),h++,a++}(),r.putImageData(m,0,0)},drop:function(a,t){!function(a,t){a<<=0;for(var r=(t<<=0)-u;r<t+u;r++)for(var o=a-u;o<a+u;o++)v[i+r*n+o]+=128}(a=a||Math.random()*(n-20)+10,t=t||Math.random()*(o-20)+10)}}};
